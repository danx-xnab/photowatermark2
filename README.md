# 图片水印工具

一个简单易用的本地图片水印应用，可以批量为图片添加自定义文本水印。

## 功能特点

### 文件处理
- 支持单张图片拖拽或通过文件选择器导入
- 支持批量导入，可一次性选择多张图片或直接导入整个文件夹
- 在界面上显示已导入图片的列表（缩略图和文件名）
- 支持主流图片格式：JPEG, PNG, BMP, TIFF
- 输出格式：用户可选择输出为 JPEG 或 PNG
- 导出图片时可指定输出文件夹，默认禁止导出到原文件夹
- 提供多种文件命名规则选项

### 水印类型
- 支持文本水印，用户可自定义输入任意文本
- 可调节文本的透明度（0-100%）
- 可选择不同的字体颜色和大小

### 水印布局与样式
- 实时预览水印效果
- 提供九宫格预设位置，用户可一键将水印放置在这些位置
- 支持通过鼠标拖拽调整水印位置

### 配置管理
- 支持保存水印模板，方便重复使用相同的水印设置
- 可加载、管理和删除已保存的模板
- 程序启动时自动加载上一次关闭时的设置

## 安装方法

### 方法一：直接运行EXE文件（推荐）
1. 从项目的`dist`目录下载`PhotoWatermark.exe`文件
2. 双击运行即可，无需安装任何依赖

### 方法二：从源码运行
1. 确保已安装Python 3.6或更高版本
2. 克隆或下载本项目
3. 创建虚拟环境：`python -m venv venv`
4. 激活虚拟环境：
   - Windows: `venv\Scripts\activate`
   - macOS/Linux: `source venv/bin/activate`
5. 安装依赖：`pip install -r requirements.txt`
6. 运行程序：`python src/main.py`

## 使用方法

1. 导入图片：点击"导入图片"按钮选择单张或多张图片，或点击"导入文件夹"按钮导入整个文件夹中的图片
2. 设置水印：在右侧面板中设置水印文本、大小、颜色和透明度
3. 调整位置：使用九宫格按钮快速定位水印，或在预览窗口中通过鼠标拖拽调整
4. 设置导出选项：选择输出格式、输出文件夹和文件命名规则
5. 导出图片：点击"导出图片"按钮完成水印添加
6. 保存模板：如果需要保存当前水印设置，点击"保存模板"按钮

## 开发说明

### 项目结构
- `src/main.py`: 主程序文件，包含所有功能实现
- `requirements.txt`: 项目依赖清单
- `build.py`: 打包脚本，用于生成可执行文件
- `.gitignore`: Git忽略文件配置

### 技术栈
- Python 3.6+
- PyQt5: 用于创建图形界面
- Pillow: 用于图像处理
- PyInstaller: 用于打包应用

### 打包应用
如果需要自己打包应用，请运行以下命令：
```bash
python build.py
```
打包完成后，可执行文件将位于`dist`目录中。

## 注意事项
- 为防止覆盖原图，程序默认禁止将图片导出到原文件夹
- 对于透明背景的PNG图片，添加水印后仍会保留透明度
- 在导出为JPEG格式时，透明背景会被转换为白色
- 模板文件默认保存在`templates`目录中

## License
[MIT](LICENSE)